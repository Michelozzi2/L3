#!/bin/bash

# Vérifie si aucun argument n'a été passé au script
if [ $# -eq 0 ]; then
    echo "Usage: $0 file1 file2 file3 ..."
    exit 1
fi

# Tableau pour stocker les noms des fichiers contenant SUCCESS
success_files=()

# Parcours de chaque fichier passé en argument
for file in "$@"; do
    # Vérifie si le fichier contient le texte "SUCCESS"
    if grep -q "SUCCESS" "$file"; then
        success_files+=("$file")
    fi
done

# Vérifie si des fichiers SUCCESS ont été trouvés
if [ ${#success_files[@]} -eq 0 ]; then
    echo "Aucun fichier ne contient le texte SUCCESS."
else
    # Écrit les noms des fichiers contenant SUCCESS dans output.txt
    printf '%s\n' "${success_files[@]}" > output.txt
    echo "Les fichiers contenant SUCCESS ont été enregistrés dans output.txt."
fi